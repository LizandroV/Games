<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>An√©cdotas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="category-icon" id="categoryIcon"></div>
        <h2 id="categoryTitle"></h2>
        <p id="prompt"></p>
        <div class="instruction">
          Haz clic en cualquier lugar para continuar
        </div>
      </div>
    </div>

    <script>
      // Datos de memorias directamente en el HTML para evitar problemas de carga
      const memoriesData = {
        colegio: {
          icon: "üè´",
          title: "Cosas del colegio",
          prompts: [
            "La primera vez que lleve a mi hijo(a) al colegio‚Ä¶",
            "Recuerdo el d√≠a que mi hijo fue al colegio y olvid√≥‚Ä¶",
            "Cuando me llamaron del colegio porque‚Ä¶",
            "Recuerdo cuando me entere que no hizo la tarea‚Ä¶",
          ],
        },
        enfermedades: {
          icon: "ü§ï",
          title: "Enfermedades y sustos",
          prompts: [
            "Una vez se cay√≥ tan fuerte que ‚Ä¶",
            "Recuerdo la primera vez que lo llev√© a urgencias‚Ä¶",
            "Hubo una noche que no dorm√≠ nada‚Ä¶",
            "Prob√© un remedio casero que me recomendaron‚Ä¶",
          ],
        },
        graciosos: {
          icon: "üòÇ",
          title: "Momentos graciosos",
          prompts: [
            "La travesura que nunca olvidar√©‚Ä¶",
            "Me dej√≥ en verg√ºenza delante de todos‚Ä¶",
            "El susto mas grande que me dio‚Ä¶",
          ],
        },
        pequenos: {
          icon: "üçº",
          title: "Cuando eran peque√±os",
          prompts: [
            'Recuerdo la primera vez que dijo "mam√°"‚Ä¶',
            "La emoci√≥n que sent√≠ al ver su primer diente‚Ä¶",
            "Recuerdo cuando camin√≥ por primera vez‚Ä¶",
            "Me hizo una pregunta tan inocente‚Ä¶",
            "Cuando se comi√≥ algo que no deb√≠a",
          ],
        },
        frases: {
          icon: "üí¨",
          title: "Frases inolvidables",
          prompts: [
            "Una vez me dijo algo tan lindo‚Ä¶",
            "Recuerdo una promesa que me hizo‚Ä¶",
            "Una vez dijo algo tan sabio‚Ä¶",
          ],
        },
        cotidiana: {
          icon: "üõí",
          title: "Vida cotidiana",
          prompts: [
            "Una vez cuando fuimos al mercado‚Ä¶",
            "Una vez lo perd√≠ por unos segundos‚Ä¶",
          ],
        },
      };

      // Variables para controlar el estado
      const categories = Object.keys(memoriesData);
      const usedPrompts = new Set();
      let allPrompts = [];

      // Crear un array con todos los prompts disponibles
      function createAllPromptsArray() {
        allPrompts = [];
        for (const category of categories) {
          const prompts = memoriesData[category].prompts;
          for (let i = 0; i < prompts.length; i++) {
            allPrompts.push({
              category: category,
              promptIndex: i,
            });
          }
        }
        return allPrompts;
      }

      // Funci√≥n para obtener un prompt aleatorio no usado
      function getRandomPrompt() {
        // Si todos los prompts han sido usados, reiniciar
        if (usedPrompts.size >= allPrompts.length) {
          usedPrompts.clear();
          alert("¬°Has visto todos los temas! Comenzaremos de nuevo.");
        }

        // Seleccionar un prompt aleatorio que no haya sido usado
        let randomIndex;
        let promptInfo;

        do {
          randomIndex = Math.floor(Math.random() * allPrompts.length);
          promptInfo = allPrompts[randomIndex];

          // Crear un ID √∫nico para este prompt
          const promptId = `${promptInfo.category}-${promptInfo.promptIndex}`;

          // Si este prompt ya ha sido usado, intentar otro
          if (!usedPrompts.has(promptId)) {
            usedPrompts.add(promptId);
            break;
          }
        } while (true);

        return promptInfo;
      }

      // Funci√≥n para mostrar un prompt aleatorio
      function displayRandomPrompt() {
        const promptInfo = getRandomPrompt();
        const category = promptInfo.category;
        const promptIndex = promptInfo.promptIndex;

        // Cambiar el color de fondo seg√∫n la categor√≠a
        document.body.className = category;

        // Actualizar el icono y t√≠tulo
        document.getElementById("categoryIcon").textContent =
          memoriesData[category].icon;
        document.getElementById("categoryTitle").textContent =
          memoriesData[category].title;

        // Mostrar el prompt
        document.getElementById("prompt").textContent =
          memoriesData[category].prompts[promptIndex];
      }

      // Iniciar cuando la p√°gina est√© cargada
      document.addEventListener("DOMContentLoaded", function () {
        // Crear el array de todos los prompts disponibles
        createAllPromptsArray();

        // Mostrar el primer prompt aleatorio
        displayRandomPrompt();

        // A√±adir evento de clic a todo el documento
        document.body.addEventListener("click", displayRandomPrompt);
      });
    </script>
  </body>
</html>
